<!DOCTYPE html>
<html>
<head>
  <title>Motivator</title>
  <link href='https://fonts.googleapis.com/css?family=PT+Sans+Narrow' rel='stylesheet' type='text/css'>
  <%= stylesheet_link_tag    'application', media: 'all' %>
  <%= javascript_include_tag 'application' %>
  <%= csrf_meta_tags %>
</head>
<body>
  <header>
    <nav class="main-nav">
      <% if logged_in? %>
      <h1><%= link_to 'Motivator', user_path(id: current_user.id) %></h1>
      <% else %>
      <h1><%= link_to 'Motivator', root_path%></h1>
      <% end %>
      <div class="user-container">
        <ul>
          <% if logged_in? %>
          <li>Welcome, <%= link_to current_user.username, user_path(current_user) %>!</li>
          <li><%= link_to 'Log Out', session_path(current_user), method: :delete %> </li>
          <% else %>
          <li><%= link_to 'Sign Up', new_user_path %></li>
          <li><%= link_to 'Log In', new_session_path %></li>
          <% end %>
        </ul>
      </div>
    </nav>
  </header>

  <main>
    <% flash.each do |name, msg| %>
      <% if msg.is_a?(String) %>
        <%= content_tag :div, msg, :class => "flash_#{name} error" %>
      <% end %>
    <% end %>

    <%= yield %>
  </main>

  <aside>
    <nav class="side side--nav">
      <form class="search-form" method="get" action="http://localhost:3000/search">
        <input class="search-input" type="text" name="q" alt="Search" value="" maxlength="256" size="32"/>
        <input class="search-button" type="submit" name="btnG" value="Search"/>
        <input type="hidden" name="site" value=""/>
      </form>

      <ul>
        <li><%= link_to 'Create New Goal', new_goal_path %></li>
        <li><%= link_to "All Goals", goals_path %>  </li>
        <li><%= link_to "All Users", users_path %></li>
        <li><%= link_to "All Charities", charities_path %></li>
      </ul>
    </nav>

    <div class="side--news">
      <h4>News Feed</h4>
      <div id="feed" class="side side--feed">
        <% @messages.each do |message| %>
        <%= render message %>
        <% end %>
      </div>
    </div>
  </aside>

  <footer>
    <p>Created by Jeff George, Chris Guard, and Luis Plaz for Dev Bootcamp</p>
  </footer>
</body>
</html>
